<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/category/[slug].tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/category/[slug].tsx" />
              <option name="originalContent" value="import { GetStaticPaths, GetStaticProps } from 'next';&#10;import { getAllCategories } from '@/services/categories';&#10;import React from 'react';&#10;&#10;interface CategoryProps {&#10;  category: {&#10;    name: string;&#10;    id: string;&#10;    slug: string;&#10;  } | null;&#10;}&#10;&#10;const CategoryPage: React.FC&lt;CategoryProps&gt; = ({ category }) =&gt; {&#10;  if (!category) return &lt;div&gt;Category not found&lt;/div&gt;;&#10;  return (&#10;    &lt;div&gt;&#10;      &lt;h1&gt;{category.name}&lt;/h1&gt;&#10;      &lt;p&gt;Category ID: {category.id}&lt;/p&gt;&#10;      &lt;p&gt;Slug: {category.slug}&lt;/p&gt;&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export const getStaticPaths: GetStaticPaths = async () =&gt; {&#10;  const categories = await getAllCategories();&#10;  const paths = categories.map((cat: { slug: string }) =&gt; ({&#10;    params: { slug: cat.slug },&#10;  }));&#10;  return { paths, fallback: false };&#10;};&#10;&#10;export const getStaticProps: GetStaticProps = async ({ params }) =&gt; {&#10;  const categories = await getAllCategories();&#10;  const category = categories.find((cat: { slug: string }) =&gt; cat.slug === params?.slug) || null;&#10;  return {&#10;    props: { category },&#10;  };&#10;};&#10;&#10;export default CategoryPage;&#10;" />
              <option name="updatedContent" value="import { getAllCategories } from '@/services/categories';&#10;import React from 'react';&#10;import { notFound } from 'next/navigation';&#10;&#10;interface CategoryProps {&#10;  params: { slug: string };&#10;}&#10;&#10;export async function generateStaticParams() {&#10;  const categories = await getAllCategories();&#10;  return categories.map((cat: { slug: string }) =&gt; ({ slug: cat.slug }));&#10;}&#10;&#10;const CategoryPage = async ({ params }: CategoryProps) =&gt; {&#10;  const categories = await getAllCategories();&#10;  const category = categories.find((cat: { slug: string }) =&gt; cat.slug === params.slug) || null;&#10;  if (!category) return notFound();&#10;  return (&#10;    &lt;div&gt;&#10;      &lt;h1&gt;{category.name}&lt;/h1&gt;&#10;      &lt;p&gt;Category ID: {category.id}&lt;/p&gt;&#10;      &lt;p&gt;Slug: {category.slug}&lt;/p&gt;&#10;    &lt;/div&gt;&#10;  );&#10;};&#10;&#10;export default CategoryPage;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/category/[slug]/page.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/category/[slug]/page.tsx" />
              <option name="originalContent" value="import {getAllCategories} from '@/services/categories';&#10;import React, {Suspense} from 'react';&#10;import {notFound} from 'next/navigation';&#10;import SkeletonProductGrid from '@/components/product/SkeletonProductGrid';&#10;import ProductGrid from '@/components/product/ProductGrid';&#10;import {type CategoryItem} from '@/types/category';&#10;import {type ProductFilter} from '@/types/product';&#10;import HeaderBackgroundImage from '@/public/categoryHeaderBackgroundImage.webp';&#10;&#10;interface CategoryParams {&#10;    slug: string;&#10;}&#10;&#10;export async function generateStaticParams() {&#10;    const categories: CategoryItem[] = await getAllCategories();&#10;&#10;    // Function to extract all categories and subcategories recursively&#10;    const extractAllCategories = (cats: CategoryItem[]): CategoryItem[] =&gt; {&#10;        if (!cats || cats.length === 0) return [];&#10;&#10;        let allCats: CategoryItem[] = [...cats];&#10;&#10;        // Process each category's children recursively&#10;        cats.forEach(cat =&gt; {&#10;            if (cat.children &amp;&amp; cat.children.length &gt; 0) {&#10;                allCats = [...allCats, ...extractAllCategories(cat.children)];&#10;            }&#10;        });&#10;&#10;        return allCats;&#10;    };&#10;&#10;    // Get all categories including subcategories at any level&#10;    const allCategories = extractAllCategories(categories);&#10;&#10;    console.table(allCategories);&#10;    // Generate params for all categories&#10;    return allCategories.map((cat) =&gt; ({&#10;        slug: cat.url_key,&#10;    }));&#10;}&#10;&#10;const CategoryPage = async ({params}: { params: Promise&lt;CategoryParams&gt; }) =&gt; {&#10;    const {slug} = await params;&#10;    const categories = await getAllCategories();&#10;    const category = categories.find((cat) =&gt; cat.url_key === slug) || null;&#10;&#10;    if (!category) return notFound();&#10;&#10;    const categoryFilter: ProductFilter = {&#10;        &quot;category_uid&quot;: {&quot;eq&quot;: category.uid}&#10;    }&#10;&#10;    return (&#10;        &lt;div className=&quot;pt-24 sm:pt-28 md:pt-32&quot;&gt;&#10;            {/* Category header */}&#10;            &lt;div className=&quot;bg-gradient-to-r from-gray-50 to-white py-8 sm:py-12 mb-8 background-repeat&quot; style={{background: &quot;url(&quot; + HeaderBackgroundImage.src + &quot;)&quot;}}&gt;&#10;                &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;&#10;                    &lt;h1 className=&quot;text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-4&quot;&gt;&#10;                        {category.name}&#10;                    &lt;/h1&gt;&#10;                    &lt;p className=&quot;text-gray-600 text-lg max-w-2xl&quot;&gt;&#10;                        Browse our collection of premium {category.name.toLowerCase()} products&#10;                    &lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Product grid section */}&#10;            &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;&#10;                &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;&#10;                    {/* Sidebar/filters */}&#10;                    &lt;aside className=&quot;w-full lg:w-64 shrink-0&quot;&gt;&#10;                        &lt;div className=&quot;bg-white rounded-xl shadow-sm p-6 sticky top-24&quot;&gt;&#10;                            &lt;h2 className=&quot;font-medium text-lg mb-4&quot;&gt;Filters&lt;/h2&gt;&#10;                            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;h3 className=&quot;text-sm font-medium mb-2&quot;&gt;Price Range&lt;/h3&gt;&#10;                                    &lt;div className=&quot;space-y-2&quot;&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-1&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-1&quot; className=&quot;text-sm&quot;&gt;Under $50&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-2&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-2&quot; className=&quot;text-sm&quot;&gt;$50 - $100&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-3&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-3&quot; className=&quot;text-sm&quot;&gt;$100 - $200&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-4&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-4&quot; className=&quot;text-sm&quot;&gt;Over $200&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/aside&gt;&#10;&#10;                    {/* Product grid */}&#10;                    &lt;div className=&quot;flex-1 min-w-0&quot;&gt;&#10;                        &lt;Suspense fallback={&lt;SkeletonProductGrid/&gt;}&gt;&#10;                            &lt;ProductGrid filter={categoryFilter} /&gt;&#10;                        &lt;/Suspense&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    );&#10;};&#10;&#10;export default CategoryPage;&#10;" />
              <option name="updatedContent" value="import {getAllCategories} from '@/services/categories';&#10;import React, {Suspense} from 'react';&#10;import {notFound} from 'next/navigation';&#10;import SkeletonProductGrid from '@/components/product/SkeletonProductGrid';&#10;import ProductGrid from '@/components/product/ProductGrid';&#10;import {type CategoryItem} from '@/types/category';&#10;import {type ProductFilter} from '@/types/product';&#10;import HeaderBackgroundImage from '@/public/categoryHeaderBackgroundImage.webp';&#10;&#10;interface CategoryParams {&#10;    slug: string;&#10;}&#10;&#10;export async function generateStaticParams() {&#10;    const categories: CategoryItem[] = await getAllCategories();&#10;&#10;    // Function to extract all categories and subcategories recursively&#10;    const extractAllCategories = (cats: CategoryItem[]): CategoryItem[] =&gt; {&#10;        if (!cats || cats.length === 0) return [];&#10;&#10;        let allCats: CategoryItem[] = [...cats];&#10;&#10;        // Process each category's children recursively&#10;        cats.forEach(cat =&gt; {&#10;            if (cat.children &amp;&amp; cat.children.length &gt; 0) {&#10;                allCats = [...allCats, ...extractAllCategories(cat.children)];&#10;            }&#10;        });&#10;&#10;        return allCats;&#10;    };&#10;&#10;    // Get all categories including subcategories at any level&#10;    const allCategories = extractAllCategories(categories);&#10;&#10;    console.table(allCategories);&#10;    // Generate params for all categories&#10;    return allCategories.map((cat) =&gt; ({&#10;        slug: cat.url_key,&#10;    }));&#10;}&#10;&#10;const CategoryPage = async ({params}: { params: Promise&lt;CategoryParams&gt; }) =&gt; {&#10;    const {slug} = await params;&#10;    const categories = await getAllCategories();&#10;    &#10;    // Function to find a category by url_key in the entire category tree&#10;    const findCategoryByUrlKey = (cats: CategoryItem[], urlKey: string): CategoryItem | null =&gt; {&#10;        for (const cat of cats) {&#10;            // Check if this is the category we're looking for&#10;            if (cat.url_key === urlKey) {&#10;                return cat;&#10;            }&#10;            &#10;            // If not, check its children recursively&#10;            if (cat.children &amp;&amp; cat.children.length &gt; 0) {&#10;                const foundInChildren = findCategoryByUrlKey(cat.children, urlKey);&#10;                if (foundInChildren) {&#10;                    return foundInChildren;&#10;                }&#10;            }&#10;        }&#10;        &#10;        return null;&#10;    };&#10;    &#10;    // Find the category using our recursive function&#10;    const category = findCategoryByUrlKey(categories, slug);&#10;&#10;    if (!category) return notFound();&#10;&#10;    const categoryFilter: ProductFilter = {&#10;        &quot;category_uid&quot;: {&quot;eq&quot;: category.uid}&#10;    }&#10;&#10;    return (&#10;        &lt;div className=&quot;pt-24 sm:pt-28 md:pt-32&quot;&gt;&#10;            {/* Category header */}&#10;            &lt;div className=&quot;bg-gradient-to-r from-gray-50 to-white py-8 sm:py-12 mb-8 background-repeat&quot; style={{background: &quot;url(&quot; + HeaderBackgroundImage.src + &quot;)&quot;}}&gt;&#10;                &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;&#10;                    &lt;h1 className=&quot;text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-gray-900 mb-4&quot;&gt;&#10;                        {category.name}&#10;                    &lt;/h1&gt;&#10;                    &lt;p className=&quot;text-gray-600 text-lg max-w-2xl&quot;&gt;&#10;                        Browse our collection of premium {category.name.toLowerCase()} products&#10;                    &lt;/p&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* Product grid section */}&#10;            &lt;div className=&quot;max-w-7xl mx-auto px-4 sm:px-6 lg:px-8&quot;&gt;&#10;                &lt;div className=&quot;flex flex-col lg:flex-row gap-8&quot;&gt;&#10;                    {/* Sidebar/filters */}&#10;                    &lt;aside className=&quot;w-full lg:w-64 shrink-0&quot;&gt;&#10;                        &lt;div className=&quot;bg-white rounded-xl shadow-sm p-6 sticky top-24&quot;&gt;&#10;                            &lt;h2 className=&quot;font-medium text-lg mb-4&quot;&gt;Filters&lt;/h2&gt;&#10;                            &lt;div className=&quot;space-y-4&quot;&gt;&#10;                                &lt;div&gt;&#10;                                    &lt;h3 className=&quot;text-sm font-medium mb-2&quot;&gt;Price Range&lt;/h3&gt;&#10;                                    &lt;div className=&quot;space-y-2&quot;&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-1&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-1&quot; className=&quot;text-sm&quot;&gt;Under $50&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-2&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-2&quot; className=&quot;text-sm&quot;&gt;$50 - $100&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-3&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-3&quot; className=&quot;text-sm&quot;&gt;$100 - $200&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                        &lt;div className=&quot;flex items-center&quot;&gt;&#10;                                            &lt;input type=&quot;checkbox&quot; id=&quot;price-4&quot; className=&quot;mr-2&quot; /&gt;&#10;                                            &lt;label htmlFor=&quot;price-4&quot; className=&quot;text-sm&quot;&gt;Over $200&lt;/label&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/div&gt;&#10;                    &lt;/aside&gt;&#10;&#10;                    {/* Product grid */}&#10;                    &lt;div className=&quot;flex-1 min-w-0&quot;&gt;&#10;                        &lt;Suspense fallback={&lt;SkeletonProductGrid/&gt;}&gt;&#10;                            &lt;ProductGrid filter={categoryFilter} /&gt;&#10;                        &lt;/Suspense&gt;&#10;                    &lt;/div&gt;&#10;                &lt;/div&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    );&#10;};&#10;&#10;export default CategoryPage;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/ClientMegaMenu.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/ClientMegaMenu.tsx" />
              <option name="originalContent" value="'use client'&#10;&#10;import {&#10;    NavigationMenu,&#10;    NavigationMenuContent,&#10;    NavigationMenuItem,&#10;    NavigationMenuList,&#10;    NavigationMenuTrigger&#10;} from &quot;@/components/ui/navigation-menu&quot;;&#10;import { usePathname } from &quot;next/navigation&quot;;&#10;import React, { useState, useEffect } from &quot;react&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { CategoryMenuContent } from &quot;./megamenu/CategoryMenuContent&quot;;&#10;&#10;/**&#10; * Client-side megamenu component with backdrop effect&#10; */&#10;export default function ClientSideMegaMenu({ categories }: { categories: CategoryItem[] }) {&#10;    const pathname = usePathname();&#10;    const [isMenuOpen, setIsMenuOpen] = useState(false);&#10;&#10;    // Effect to manage body scroll when menu is open&#10;    useEffect(() =&gt; {&#10;        if (isMenuOpen) {&#10;            document.body.classList.add('overflow-hidden');&#10;        } else {&#10;            document.body.classList.remove('overflow-hidden');&#10;        }&#10;&#10;        return () =&gt; {&#10;            document.body.classList.remove('overflow-hidden');&#10;        };&#10;    }, [isMenuOpen]);&#10;&#10;    // Effect to add backdrop blur to main content only&#10;    useEffect(() =&gt; {&#10;        const mainElement = document.querySelector('main');&#10;        if (mainElement) {&#10;            if (isMenuOpen) {&#10;                // Add blur and dimming effects to the main content&#10;                mainElement.classList.add('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;&#10;            } else {&#10;                mainElement.classList.remove('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;                const existingStyle = document.getElementById('megamenu-backdrop-style');&#10;                if (existingStyle) {&#10;                    existingStyle.remove();&#10;                }&#10;            }&#10;        }&#10;    }, [isMenuOpen]);&#10;&#10;    return (&#10;        &lt;NavigationMenu onValueChange={(value) =&gt; setIsMenuOpen(!!value)}&gt;&#10;            &lt;NavigationMenuList&gt;&#10;                {categories.map((category) =&gt; (&#10;                    &lt;NavigationMenuItem key={category.uid}&gt;&#10;                        &lt;NavigationMenuTrigger&#10;                            className={cn(&#10;                                &quot;text-sm font-medium bg-transparent&quot;,&#10;                                pathname?.includes(`/category/${category.url_key}`)&#10;                                    ? &quot;text-primary&quot;&#10;                                    : &quot;text-gray-700&quot;&#10;                            )}&#10;                        &gt;&#10;                            {category.name}&#10;                        &lt;/NavigationMenuTrigger&gt;&#10;                        &lt;NavigationMenuContent className=&quot;w-[800px] lg:w-[950px] bg-white rounded-xl shadow-xl border border-gray-100 z-30&quot;&gt;&#10;                            &lt;CategoryMenuContent category={category} activePath={pathname} /&gt;&#10;                        &lt;/NavigationMenuContent&gt;&#10;                    &lt;/NavigationMenuItem&gt;&#10;                ))}&#10;            &lt;/NavigationMenuList&gt;&#10;        &lt;/NavigationMenu&gt;&#10;    );&#10;}&#10;" />
              <option name="updatedContent" value="'use client'&#10;&#10;import {&#10;    NavigationMenu,&#10;    NavigationMenuContent,&#10;    NavigationMenuItem,&#10;    NavigationMenuList,&#10;    NavigationMenuTrigger&#10;} from &quot;@/components/ui/navigation-menu&quot;;&#10;import { usePathname } from &quot;next/navigation&quot;;&#10;import React, { useState, useEffect, useCallback } from &quot;react&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { CategoryMenuContent } from &quot;./megamenu/CategoryMenuContent&quot;;&#10;&#10;/**&#10; * Client-side megamenu component with backdrop effect&#10; * Only handles interactive elements and effects, with content rendered by server components&#10; */&#10;export default function ClientSideMegaMenu({ categories }: { categories: CategoryItem[] }) {&#10;    const pathname = usePathname();&#10;    const [isMenuOpen, setIsMenuOpen] = useState(false);&#10;    &#10;    // Handle backdrop effect with a memoized function to improve performance&#10;    const applyBackdropEffect = useCallback((isOpen: boolean) =&gt; {&#10;        const mainElement = document.querySelector('main');&#10;        if (!mainElement) return;&#10;        &#10;        if (isOpen) {&#10;            // Add blur and dimming effects to the main content&#10;            mainElement.classList.add('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;            &#10;            // Apply styles to any background images in the main element&#10;            const style = document.createElement('style');&#10;            style.id = 'megamenu-backdrop-style';&#10;            style.textContent = `&#10;                main::before {&#10;                    content: '';&#10;                    position: absolute;&#10;                    inset: 0;&#10;                    background-color: rgba(0,0,0,0.2);&#10;                    backdrop-filter: blur(8px);&#10;                    z-index: 5;&#10;                    pointer-events: none;&#10;                }&#10;            `;&#10;            document.head.appendChild(style);&#10;        } else {&#10;            mainElement.classList.remove('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;            const existingStyle = document.getElementById('megamenu-backdrop-style');&#10;            if (existingStyle) {&#10;                existingStyle.remove();&#10;            }&#10;        }&#10;    }, []);&#10;    &#10;    // Effect to manage body scroll and backdrop when menu is open&#10;    useEffect(() =&gt; {&#10;        if (isMenuOpen) {&#10;            document.body.classList.add('overflow-hidden');&#10;            applyBackdropEffect(true);&#10;        } else {&#10;            document.body.classList.remove('overflow-hidden');&#10;            applyBackdropEffect(false);&#10;        }&#10;        &#10;        return () =&gt; {&#10;            document.body.classList.remove('overflow-hidden');&#10;            applyBackdropEffect(false);&#10;        };&#10;    }, [isMenuOpen, applyBackdropEffect]);&#10;&#10;    return (&#10;        &lt;NavigationMenu onValueChange={(value) =&gt; setIsMenuOpen(!!value)}&gt;&#10;            &lt;NavigationMenuList&gt;&#10;                {categories.map((category) =&gt; (&#10;                    &lt;NavigationMenuItem key={category.uid}&gt;&#10;                        &lt;NavigationMenuTrigger&#10;                            className={cn(&#10;                                &quot;text-sm font-medium&quot;,&#10;                                pathname?.includes(`/category/${category.url_key}`)&#10;                                    ? &quot;text-primary&quot;&#10;                                    : &quot;text-gray-700&quot;&#10;                            )}&#10;                        &gt;&#10;                            {category.name}&#10;                        &lt;/NavigationMenuTrigger&gt;&#10;                        &lt;NavigationMenuContent className=&quot;w-[800px] lg:w-[950px] bg-white rounded-xl shadow-xl border border-gray-100 z-30&quot;&gt;&#10;                            {/* CategoryMenuContent remains a server component */}&#10;                            &lt;CategoryMenuContent category={category} activePath={pathname} /&gt;&#10;                        &lt;/NavigationMenuContent&gt;&#10;                    &lt;/NavigationMenuItem&gt;&#10;                ))}&#10;            &lt;/NavigationMenuList&gt;&#10;        &lt;/NavigationMenu&gt;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/MegaMenu.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/MegaMenu.tsx" />
              <option name="originalContent" value="import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { CategoryMenuContent } from &quot;./megamenu/CategoryMenuContent&quot;;&#10;import MegaMenuWrapper from &quot;./megamenu/MegaMenuWrapper&quot;;&#10;&#10;/**&#10; * Server component that renders the megamenu&#10; * Uses the MegaMenuWrapper for client-side interactivity&#10; * while keeping most content server-rendered&#10; */&#10;export default function MegaMenu({ categories }: { categories: CategoryItem[] }) {&#10;  // This server component passes a render prop to the client wrapper&#10;  // This technique allows server components to be consumed by client components&#10;  return (&#10;    &lt;MegaMenuWrapper&#10;      categories={categories}&#10;      renderContent={(category, pathname) =&gt; (&#10;        &lt;CategoryMenuContent&#10;          category={category}&#10;          activePath={pathname}&#10;        /&gt;&#10;      )}&#10;    /&gt;&#10;  );&#10;}&#10;" />
              <option name="updatedContent" value="import { CategoryItem } from &quot;@/types/category&quot;;&#10;import MegaMenuWrapper from &quot;./megamenu/MegaMenuWrapper&quot;;&#10;&#10;/**&#10; * Server component that renders the megamenu&#10; * Uses the MegaMenuWrapper for client-side interactivity&#10; * while keeping most content server-rendered&#10; */&#10;export default function MegaMenu({ categories }: { categories: CategoryItem[] }) {&#10;  return (&#10;    &lt;MegaMenuWrapper categories={categories} /&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/Navbar.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/Navbar.tsx" />
              <option name="originalContent" value="import Link from &quot;next/link&quot;;&#10;import {&#10;    NavigationMenu,&#10;    NavigationMenuContent,&#10;    NavigationMenuItem,&#10;    NavigationMenuLink,&#10;    NavigationMenuList,&#10;    NavigationMenuTrigger&#10;} from &quot;@/components/ui/navigation-menu&quot;;&#10;import {Input} from &quot;@/components/ui/input&quot;&#10;import {getAllCategories} from &quot;@/services/categories&quot;;&#10;import MiniCart from &quot;@/components/minicart/Minicart&quot;;&#10;import * as React from &quot;react&quot;;&#10;&#10;export default async function Navbar() {&#10;    const categories = await getAllCategories();&#10;&#10;    return (&#10;        &lt;&gt;&#10;            &lt;div&gt;&#10;                &lt;Link href=&quot;/&quot; className=&quot;text-lg font-medium hover:opacity-80 transition-opacity&quot;&gt;Home&lt;/Link&gt;&#10;            &lt;/div&gt;&#10;            &lt;NavigationMenu viewport={false}&gt;&#10;                &lt;NavigationMenuList&gt;&#10;                    {categories.map((cat) =&gt; (&#10;                        &lt;NavigationMenuItem key={cat.uid}&gt;&#10;                            &lt;NavigationMenuLink className=&quot;text-sm font-medium text-gray-700 hover:text-gray-900&quot;&#10;                                                asChild&gt;&#10;                                &lt;Link href={`/category/${cat.url_key}`}&gt;{cat.name}&lt;/Link&gt;&#10;                            &lt;/NavigationMenuLink&gt;&#10;                        &lt;/NavigationMenuItem&gt;&#10;                    ))}&#10;                    &lt;NavigationMenuItem&gt;&#10;                        &lt;NavigationMenuTrigger&gt;Home&lt;/NavigationMenuTrigger&gt;&#10;                        &lt;NavigationMenuContent&gt;&#10;                            &lt;ul className=&quot;grid gap-2 md:w-[400px] lg:w-[500px] lg:grid-cols-[.75fr_1fr]&quot;&gt;&#10;                                &lt;li className=&quot;row-span-3&quot;&gt;&#10;                                    &lt;NavigationMenuLink asChild&gt;&#10;                                        &lt;Link&#10;                                            className=&quot;from-muted/50 to-muted flex h-full w-full flex-col justify-end rounded-md bg-linear-to-b p-6 no-underline outline-hidden select-none focus:shadow-md&quot;&#10;                                            href=&quot;/&quot;&#10;                                        &gt;&#10;                                            &lt;div className=&quot;mt-4 mb-2 text-lg font-medium&quot;&gt;&#10;                                                shadcn/ui&#10;                                            &lt;/div&gt;&#10;                                            &lt;p className=&quot;text-muted-foreground text-sm leading-tight&quot;&gt;&#10;                                                Beautifully designed components built with Tailwind CSS.&#10;                                            &lt;/p&gt;&#10;                                        &lt;/Link&gt;&#10;                                    &lt;/NavigationMenuLink&gt;&#10;                                &lt;/li&gt;&#10;                                &lt;ListItem href=&quot;/docs&quot; title=&quot;Introduction&quot;&gt;&#10;                                    Re-usable components built using Radix UI and Tailwind CSS.&#10;                                &lt;/ListItem&gt;&#10;                                &lt;ListItem href=&quot;/docs/installation&quot; title=&quot;Installation&quot;&gt;&#10;                                    How to install dependencies and structure your app.&#10;                                &lt;/ListItem&gt;&#10;                                &lt;ListItem href=&quot;/docs/primitives/typography&quot; title=&quot;Typography&quot;&gt;&#10;                                    Styles for headings, paragraphs, lists...etc&#10;                                &lt;/ListItem&gt;&#10;                            &lt;/ul&gt;&#10;                        &lt;/NavigationMenuContent&gt;&#10;                    &lt;/NavigationMenuItem&gt;&#10;                &lt;/NavigationMenuList&gt;&#10;            &lt;/NavigationMenu&gt;&#10;            &lt;div className=&quot;flex flex-row items-center gap-6&quot;&gt;&#10;                &lt;MiniCart/&gt;&#10;                &lt;Input&#10;                    type=&quot;search&quot;&#10;                    placeholder=&quot;Search&quot;&#10;                    className=&quot;w-full max-w-sm bg-transparent placeholder:text-black placeholder:opacity-100 border-gray-300&quot;&#10;                /&gt;&#10;            &lt;/div&gt;&#10;        &lt;/&gt;&#10;    );&#10;}&#10;&#10;function ListItem({&#10;                      title,&#10;                      children,&#10;                      href,&#10;                      ...props&#10;                  }: React.ComponentPropsWithoutRef&lt;&quot;li&quot;&gt; &amp; { href: string }) {&#10;    return (&#10;        &lt;li {...props}&gt;&#10;            &lt;NavigationMenuLink asChild&gt;&#10;                &lt;Link href={href}&gt;&#10;                    &lt;div className=&quot;text-sm leading-none font-medium&quot;&gt;{title}&lt;/div&gt;&#10;                    &lt;p className=&quot;text-muted-foreground line-clamp-2 text-sm leading-snug&quot;&gt;&#10;                        {children}&#10;                    &lt;/p&gt;&#10;                &lt;/Link&gt;&#10;            &lt;/NavigationMenuLink&gt;&#10;        &lt;/li&gt;&#10;    )&#10;}" />
              <option name="updatedContent" value="import Link from &quot;next/link&quot;;&#10;import Image from &quot;next/image&quot;;&#10;import {&#10;    NavigationMenu,&#10;    NavigationMenuContent,&#10;    NavigationMenuItem,&#10;    NavigationMenuLink,&#10;    NavigationMenuList,&#10;    NavigationMenuTrigger&#10;} from &quot;@/components/ui/navigation-menu&quot;;&#10;import { Input } from &quot;@/components/ui/input&quot;;&#10;import { getAllCategories } from &quot;@/services/categories&quot;;&#10;import MiniCart from &quot;@/components/minicart/Minicart&quot;;&#10;import * as React from &quot;react&quot;;&#10;import { usePathname } from &quot;next/navigation&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;&#10;// Helper component for category menu items&#10;const CategoryMenuItem = ({ &#10;    category, &#10;    level = 0, &#10;    activePath &#10;}: { &#10;    category: any, &#10;    level?: number, &#10;    activePath?: string &#10;}) =&gt; {&#10;    const isActive = activePath?.includes(`/category/${category.url_key}`);&#10;    const indentClass = level &gt; 0 ? `pl-${level * 2}` : '';&#10;&#10;    return (&#10;        &lt;div key={category.uid} className={`mb-1 ${indentClass}`}&gt;&#10;            &lt;Link &#10;                href={`/category/${category.url_key}`}&#10;                className={cn(&#10;                    &quot;text-sm font-medium hover:text-primary transition-colors&quot;,&#10;                    isActive ? &quot;text-primary font-semibold&quot; : &quot;text-gray-700&quot;&#10;                )}&#10;            &gt;&#10;                {category.name}&#10;            &lt;/Link&gt;&#10;            {category.children &amp;&amp; category.children.length &gt; 0 &amp;&amp; (&#10;                &lt;div className=&quot;pl-4 mt-1 border-l border-gray-200&quot;&gt;&#10;                    {category.children.map((child: any) =&gt; (&#10;                        &lt;CategoryMenuItem &#10;                            key={child.uid} &#10;                            category={child} &#10;                            level={level + 1}&#10;                            activePath={activePath}&#10;                        /&gt;&#10;                    ))}&#10;                &lt;/div&gt;&#10;            )}&#10;        &lt;/div&gt;&#10;    );&#10;};&#10;&#10;// Client component wrapper for interactive elements&#10;&quot;use client&quot;;&#10;&#10;const ClientSideMegaMenu = ({ categories }: { categories: any[] }) =&gt; {&#10;    const pathname = usePathname();&#10;    const [activeCategory, setActiveCategory] = React.useState&lt;any&gt;(null);&#10;&#10;    return (&#10;        &lt;NavigationMenu&gt;&#10;            &lt;NavigationMenuList&gt;&#10;                {categories.map((category) =&gt; (&#10;                    &lt;NavigationMenuItem key={category.uid}&gt;&#10;                        &lt;NavigationMenuTrigger &#10;                            className={cn(&#10;                                &quot;text-sm font-medium&quot;,&#10;                                pathname?.includes(`/category/${category.url_key}`) &#10;                                    ? &quot;text-primary&quot; &#10;                                    : &quot;text-gray-700&quot;&#10;                            )}&#10;                            onMouseEnter={() =&gt; setActiveCategory(category)}&#10;                        &gt;&#10;                            {category.name}&#10;                        &lt;/NavigationMenuTrigger&gt;&#10;                        &lt;NavigationMenuContent className=&quot;w-[800px] lg:w-[950px]&quot;&gt;&#10;                            &lt;div className=&quot;grid grid-cols-12 gap-4 p-4&quot;&gt;&#10;                                &lt;div className=&quot;col-span-5 overflow-y-auto max-h-[400px] pr-4 border-r&quot;&gt;&#10;                                    &lt;h3 className=&quot;font-medium mb-2 text-gray-900&quot;&gt;{category.name} Categories&lt;/h3&gt;&#10;                                    {category.children &amp;&amp; category.children.length &gt; 0 ? (&#10;                                        &lt;div className=&quot;space-y-1&quot;&gt;&#10;                                            {category.children.map((child: any) =&gt; (&#10;                                                &lt;CategoryMenuItem &#10;                                                    key={child.uid} &#10;                                                    category={child} &#10;                                                    activePath={pathname}&#10;                                                /&gt;&#10;                                            ))}&#10;                                        &lt;/div&gt;&#10;                                    ) : (&#10;                                        &lt;p className=&quot;text-sm text-gray-500&quot;&gt;No subcategories available&lt;/p&gt;&#10;                                    )}&#10;                                &lt;/div&gt;&#10;                                &lt;div className=&quot;col-span-7&quot;&gt;&#10;                                    &lt;div className=&quot;h-full flex flex-col&quot;&gt;&#10;                                        {/* Category Banner */}&#10;                                        &lt;div className=&quot;mb-4 relative h-[200px] overflow-hidden rounded-lg&quot;&gt;&#10;                                            {category.image ? (&#10;                                                &lt;Image&#10;                                                    src={category.image}&#10;                                                    alt={category.name}&#10;                                                    fill&#10;                                                    className=&quot;object-cover&quot;&#10;                                                /&gt;&#10;                                            ) : (&#10;                                                &lt;div className=&quot;w-full h-full bg-gradient-to-r from-gray-200 to-gray-300 flex items-center justify-center&quot;&gt;&#10;                                                    &lt;span className=&quot;text-gray-500&quot;&gt;{category.name}&lt;/span&gt;&#10;                                                &lt;/div&gt;&#10;                                            )}&#10;                                        &lt;/div&gt;&#10;                                        &#10;                                        {/* Category Description */}&#10;                                        &lt;div className=&quot;flex-1&quot;&gt;&#10;                                            &lt;h3 className=&quot;text-lg font-medium mb-2&quot;&gt;{category.name}&lt;/h3&gt;&#10;                                            {category.description ? (&#10;                                                &lt;div &#10;                                                    className=&quot;text-sm text-gray-600 prose prose-sm max-w-none&quot;&#10;                                                    dangerouslySetInnerHTML={{ __html: category.description }}&#10;                                                /&gt;&#10;                                            ) : (&#10;                                                &lt;p className=&quot;text-sm text-gray-500&quot;&gt;&#10;                                                    Explore our selection of {category.name.toLowerCase()} products.&#10;                                                &lt;/p&gt;&#10;                                            )}&#10;                                            &lt;Link &#10;                                                href={`/category/${category.url_key}`}&#10;                                                className=&quot;inline-block mt-4 text-sm font-medium text-primary hover:underline&quot;&#10;                                            &gt;&#10;                                                View All {category.name} Products&#10;                                            &lt;/Link&gt;&#10;                                        &lt;/div&gt;&#10;                                    &lt;/div&gt;&#10;                                &lt;/div&gt;&#10;                            &lt;/div&gt;&#10;                        &lt;/NavigationMenuContent&gt;&#10;                    &lt;/NavigationMenuItem&gt;&#10;                ))}&#10;            &lt;/NavigationMenuList&gt;&#10;        &lt;/NavigationMenu&gt;&#10;    );&#10;};&#10;&#10;// Server component&#10;export default async function Navbar() {&#10;    const categories = await getAllCategories();&#10;&#10;    return (&#10;        &lt;&gt;&#10;            &lt;div&gt;&#10;                &lt;Link href=&quot;/&quot; className=&quot;text-lg font-medium hover:opacity-80 transition-opacity&quot;&gt;Home&lt;/Link&gt;&#10;            &lt;/div&gt;&#10;            &#10;            &lt;ClientSideMegaMenu categories={categories} /&gt;&#10;            &#10;            &lt;div className=&quot;flex flex-row items-center gap-6&quot;&gt;&#10;                &lt;MiniCart/&gt;&#10;                &lt;Input&#10;                    type=&quot;search&quot;&#10;                    placeholder=&quot;Search&quot;&#10;                    className=&quot;w-full max-w-sm bg-transparent placeholder:text-black placeholder:opacity-100 border-gray-300&quot;&#10;                /&gt;&#10;            &lt;/div&gt;&#10;        &lt;/&gt;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/megamenu/CategoryMenuContent.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/megamenu/CategoryMenuContent.tsx" />
              <option name="originalContent" value="import Image from &quot;next/image&quot;;&#10;import Link from &quot;next/link&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { CategoryMenuTree } from &quot;./CategoryMenuTree&quot;;&#10;&#10;/**&#10; * Server component to render the megamenu content&#10; */&#10;export function CategoryMenuContent({ &#10;  category, &#10;  activePath &#10;}: { &#10;  category: CategoryItem;&#10;  activePath: string;&#10;}) {&#10;  return (&#10;    &lt;div className=&quot;grid grid-cols-12 gap-4 p-4&quot;&gt;&#10;      &lt;div className=&quot;col-span-5 overflow-y-auto max-h-[400px] pr-4 border-r&quot;&gt;&#10;        &lt;h3 className=&quot;font-medium mb-2 text-gray-900&quot;&gt;{category.name} Categories&lt;/h3&gt;&#10;        {category.children &amp;&amp; category.children.length &gt; 0 ? (&#10;          &lt;div className=&quot;space-y-1&quot;&gt;&#10;            {category.children.map((child: CategoryItem) =&gt; (&#10;              &lt;CategoryMenuTree&#10;                key={child.uid}&#10;                category={child}&#10;                activePath={activePath}&#10;              /&gt;&#10;            ))}&#10;          &lt;/div&gt;&#10;        ) : (&#10;          &lt;p className=&quot;text-sm text-gray-500&quot;&gt;No subcategories available&lt;/p&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;      &lt;div className=&quot;col-span-7&quot;&gt;&#10;        &lt;div className=&quot;h-full flex flex-col&quot;&gt;&#10;          {/* Category Banner */}&#10;          &lt;div className=&quot;mb-4 relative h-[200px] overflow-hidden rounded-lg&quot;&gt;&#10;            {category.image ? (&#10;              &lt;Image&#10;                src={category.image}&#10;                alt={category.name}&#10;                fill&#10;                className=&quot;object-cover&quot;&#10;              /&gt;&#10;            ) : (&#10;              &lt;div className=&quot;w-full h-full bg-gradient-to-r from-gray-200 to-gray-300 flex items-center justify-center&quot;&gt;&#10;                &lt;span className=&quot;text-gray-500&quot;&gt;{category.name}&lt;/span&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/div&gt;&#10;&#10;          {/* Category Description */}&#10;          &lt;div className=&quot;flex-1&quot;&gt;&#10;            &lt;h3 className=&quot;text-lg font-medium mb-2&quot;&gt;{category.name}&lt;/h3&gt;&#10;            {category.description ? (&#10;              &lt;div&#10;                className=&quot;text-sm text-gray-600 prose prose-sm max-w-none&quot;&#10;                dangerouslySetInnerHTML={{ __html: category.description }}&#10;              /&gt;&#10;            ) : (&#10;              &lt;p className=&quot;text-sm text-gray-500&quot;&gt;&#10;                Explore our selection of {category.name.toLowerCase()} products.&#10;              &lt;/p&gt;&#10;            )}&#10;            &lt;Link&#10;              href={`/category/${category.url_key}`}&#10;              className=&quot;inline-block mt-4 text-sm font-medium text-primary hover:underline&quot;&#10;            &gt;&#10;              View All {category.name} Products&#10;            &lt;/Link&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;}&#10;" />
              <option name="updatedContent" value="import Image from &quot;next/image&quot;;&#10;import Link from &quot;next/link&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { CategoryMenuTreeClient } from &quot;./CategoryMenuTreeClient&quot;;&#10;&#10;/**&#10; * Server component to render the megamenu content&#10; * This component is designed to be a true server component with minimal client-side dependencies&#10; */&#10;export function CategoryMenuContent({ &#10;  category, &#10;  activePath &#10;}: { &#10;  category: CategoryItem;&#10;  activePath: string;&#10;}) {&#10;  return (&#10;    &lt;div className=&quot;grid grid-cols-12 gap-4 p-4&quot;&gt;&#10;      &lt;div className=&quot;col-span-5 overflow-y-auto max-h-[400px] pr-4 border-r&quot;&gt;&#10;        &lt;h3 className=&quot;font-medium mb-2 text-gray-900&quot;&gt;{category.name} Categories&lt;/h3&gt;&#10;        {category.children &amp;&amp; category.children.length &gt; 0 ? (&#10;          &lt;div className=&quot;space-y-1&quot;&gt;&#10;            {/* Only the tree navigation needs to be a client component for path highlighting */}&#10;            &lt;CategoryMenuTreeClient &#10;              categories={category.children} &#10;              activePath={activePath} &#10;            /&gt;&#10;          &lt;/div&gt;&#10;        ) : (&#10;          &lt;p className=&quot;text-sm text-gray-500&quot;&gt;No subcategories available&lt;/p&gt;&#10;        )}&#10;      &lt;/div&gt;&#10;      &lt;div className=&quot;col-span-7&quot;&gt;&#10;        &lt;div className=&quot;h-full flex flex-col&quot;&gt;&#10;          {/* Category Banner */}&#10;          &lt;div className=&quot;mb-4 relative h-[200px] overflow-hidden rounded-lg&quot;&gt;&#10;            {category.image ? (&#10;              &lt;Image&#10;                src={category.image}&#10;                alt={category.name}&#10;                fill&#10;                className=&quot;object-cover&quot;&#10;              /&gt;&#10;            ) : (&#10;              &lt;div className=&quot;w-full h-full bg-gradient-to-r from-gray-200 to-gray-300 flex items-center justify-center&quot;&gt;&#10;                &lt;span className=&quot;text-gray-500&quot;&gt;{category.name}&lt;/span&gt;&#10;              &lt;/div&gt;&#10;            )}&#10;          &lt;/div&gt;&#10;&#10;          {/* Category Description */}&#10;          &lt;div className=&quot;flex-1&quot;&gt;&#10;            &lt;h3 className=&quot;text-lg font-medium mb-2&quot;&gt;{category.name}&lt;/h3&gt;&#10;            {category.description ? (&#10;              &lt;div&#10;                className=&quot;text-sm text-gray-600 prose prose-sm max-w-none&quot;&#10;                dangerouslySetInnerHTML={{ __html: category.description }}&#10;              /&gt;&#10;            ) : (&#10;              &lt;p className=&quot;text-sm text-gray-500&quot;&gt;&#10;                Explore our selection of {category.name.toLowerCase()} products.&#10;              &lt;/p&gt;&#10;            )}&#10;            &lt;Link&#10;              href={`/category/${category.url_key}`}&#10;              className=&quot;inline-block mt-4 text-sm font-medium text-primary hover:underline&quot;&#10;            &gt;&#10;              View All {category.name} Products&#10;            &lt;/Link&gt;&#10;          &lt;/div&gt;&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/megamenu/CategoryMenuTree.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/megamenu/CategoryMenuTree.tsx" />
              <option name="updatedContent" value="&quot;use client&quot;;&#10;&#10;import Link from &quot;next/link&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;&#10;/**&#10; * Client component for rendering category tree with active path highlighting&#10; */&#10;export function CategoryMenuTree({&#10;  category,&#10;  level = 0,&#10;  activePath&#10;}: {&#10;  category: CategoryItem;&#10;  level?: number;&#10;  activePath: string;&#10;}) {&#10;  const isActive = activePath?.includes(`/category/${category.url_key}`);&#10;  const indentClass = level &gt; 0 ? `pl-${level * 2}` : '';&#10;&#10;  return (&#10;    &lt;div className={`mb-1 ${indentClass}`}&gt;&#10;      &lt;Link&#10;        href={`/category/${category.url_key}`}&#10;        className={cn(&#10;          &quot;text-sm font-medium hover:text-primary transition-colors&quot;,&#10;          isActive ? &quot;text-primary font-semibold&quot; : &quot;text-gray-700&quot;&#10;        )}&#10;      &gt;&#10;        {category.name}&#10;      &lt;/Link&gt;&#10;      {category.children &amp;&amp; category.children.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;pl-4 mt-1 border-l border-gray-200&quot;&gt;&#10;          {category.children.map((child: CategoryItem) =&gt; (&#10;            &lt;CategoryMenuTree&#10;              key={child.uid}&#10;              category={child}&#10;              level={level + 1}&#10;              activePath={activePath}&#10;            /&gt;&#10;          ))}&#10;        &lt;/div&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/megamenu/CategoryMenuTreeClient.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/megamenu/CategoryMenuTreeClient.tsx" />
              <option name="updatedContent" value="&quot;use client&quot;;&#10;&#10;import Link from &quot;next/link&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;&#10;/**&#10; * Recursive component to render a single category item and its children&#10; */&#10;function CategoryMenuItem({&#10;  category,&#10;  level = 0,&#10;  activePath&#10;}: {&#10;  category: CategoryItem;&#10;  level?: number;&#10;  activePath: string;&#10;}) {&#10;  const isActive = activePath?.includes(`/category/${category.url_key}`);&#10;  const indentClass = level &gt; 0 ? `pl-${level * 2}` : '';&#10;&#10;  return (&#10;    &lt;div key={category.uid} className={`mb-1 ${indentClass}`}&gt;&#10;      &lt;Link&#10;        href={`/category/${category.url_key}`}&#10;        className={cn(&#10;          &quot;text-sm font-medium hover:text-primary transition-colors&quot;,&#10;          isActive ? &quot;text-primary font-semibold&quot; : &quot;text-gray-700&quot;&#10;        )}&#10;      &gt;&#10;        {category.name}&#10;      &lt;/Link&gt;&#10;      {category.children &amp;&amp; category.children.length &gt; 0 &amp;&amp; (&#10;        &lt;div className=&quot;pl-4 mt-1 border-l border-gray-200&quot;&gt;&#10;          {category.children.map((child: CategoryItem) =&gt; (&#10;            &lt;CategoryMenuItem&#10;              key={child.uid}&#10;              category={child}&#10;              level={level + 1}&#10;              activePath={activePath}&#10;            /&gt;&#10;          ))}&#10;        &lt;/div&gt;&#10;      )}&#10;    &lt;/div&gt;&#10;  );&#10;}&#10;&#10;/**&#10; * Client component wrapper for category tree navigation&#10; * This isolates the client-side behavior to just the interactive category tree&#10; */&#10;export function CategoryMenuTreeClient({&#10;  categories,&#10;  activePath&#10;}: {&#10;  categories: CategoryItem[];&#10;  activePath: string;&#10;}) {&#10;  return (&#10;    &lt;&gt;&#10;      {categories.map((category) =&gt; (&#10;        &lt;CategoryMenuItem&#10;          key={category.uid}&#10;          category={category}&#10;          activePath={activePath}&#10;        /&gt;&#10;      ))}&#10;    &lt;/&gt;&#10;  );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/components/megamenu/MegaMenuWrapper.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/components/megamenu/MegaMenuWrapper.tsx" />
              <option name="originalContent" value="&quot;use client&quot;;&#10;&#10;import {&#10;    NavigationMenu,&#10;    NavigationMenuContent,&#10;    NavigationMenuItem,&#10;    NavigationMenuList,&#10;    NavigationMenuTrigger&#10;} from &quot;@/components/ui/navigation-menu&quot;;&#10;import { usePathname } from &quot;next/navigation&quot;;&#10;import React, { useState, useEffect, useCallback } from &quot;react&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;&#10;/**&#10; * Client-side wrapper for the megamenu&#10; * This component only handles interactive elements (triggers, state, effects)&#10; * Content is passed through as children from server components&#10; */&#10;export default function MegaMenuWrapper({ &#10;  categories,&#10;  renderContent&#10;}: { &#10;  categories: CategoryItem[];&#10;  renderContent: (category: CategoryItem, pathname: string) =&gt; React.ReactNode;&#10;}) {&#10;    const pathname = usePathname();&#10;    const [isMenuOpen, setIsMenuOpen] = useState(false);&#10;&#10;    // Handle backdrop effect with a memoized function to improve performance&#10;    const applyBackdropEffect = useCallback((isOpen: boolean) =&gt; {&#10;        const mainElement = document.querySelector('main');&#10;        if (!mainElement) return;&#10;        &#10;        if (isOpen) {&#10;            // Add blur and dimming effects to the main content&#10;            mainElement.classList.add('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;            &#10;            // Apply styles to any background images in the main element&#10;            const style = document.createElement('style');&#10;            style.id = 'megamenu-backdrop-style';&#10;            style.textContent = `&#10;                main::before {&#10;                    content: '';&#10;                    position: absolute;&#10;                    inset: 0;&#10;                    background-color: rgba(0,0,0,0.2);&#10;                    backdrop-filter: blur(8px);&#10;                    z-index: 5;&#10;                    pointer-events: none;&#10;                }&#10;            `;&#10;            document.head.appendChild(style);&#10;        } else {&#10;            mainElement.classList.remove('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;            const existingStyle = document.getElementById('megamenu-backdrop-style');&#10;            if (existingStyle) {&#10;                existingStyle.remove();&#10;            }&#10;        }&#10;    }, []);&#10;    &#10;    // Effect to manage body scroll and backdrop when menu is open&#10;    useEffect(() =&gt; {&#10;        if (isMenuOpen) {&#10;            document.body.classList.add('overflow-hidden');&#10;            applyBackdropEffect(true);&#10;        } else {&#10;            document.body.classList.remove('overflow-hidden');&#10;            applyBackdropEffect(false);&#10;        }&#10;        &#10;        return () =&gt; {&#10;            document.body.classList.remove('overflow-hidden');&#10;            applyBackdropEffect(false);&#10;        };&#10;    }, [isMenuOpen, applyBackdropEffect]);&#10;&#10;    return (&#10;        &lt;NavigationMenu onValueChange={(value) =&gt; setIsMenuOpen(!!value)}&gt;&#10;            &lt;NavigationMenuList&gt;&#10;                {categories.map((category) =&gt; (&#10;                    &lt;NavigationMenuItem key={category.uid}&gt;&#10;                        &lt;NavigationMenuTrigger&#10;                            className={cn(&#10;                                &quot;text-sm font-medium&quot;,&#10;                                pathname?.includes(`/category/${category.url_key}`)&#10;                                    ? &quot;text-primary&quot;&#10;                                    : &quot;text-gray-700&quot;&#10;                            )}&#10;                        &gt;&#10;                            {category.name}&#10;                        &lt;/NavigationMenuTrigger&gt;&#10;                        &lt;NavigationMenuContent className=&quot;w-[800px] lg:w-[950px] bg-white rounded-xl shadow-xl border border-gray-100 z-30&quot;&gt;&#10;                            {/* Render the server component content */}&#10;                            {renderContent(category, pathname)}&#10;                        &lt;/NavigationMenuContent&gt;&#10;                    &lt;/NavigationMenuItem&gt;&#10;                ))}&#10;            &lt;/NavigationMenuList&gt;&#10;        &lt;/NavigationMenu&gt;&#10;    );&#10;}&#10;" />
              <option name="updatedContent" value="&quot;use client&quot;;&#10;&#10;import {&#10;    NavigationMenu,&#10;    NavigationMenuContent,&#10;    NavigationMenuItem,&#10;    NavigationMenuList,&#10;    NavigationMenuTrigger&#10;} from &quot;@/components/ui/navigation-menu&quot;;&#10;import { usePathname } from &quot;next/navigation&quot;;&#10;import React, { useState, useEffect, useCallback } from &quot;react&quot;;&#10;import { cn } from &quot;@/lib/utils&quot;;&#10;import { CategoryItem } from &quot;@/types/category&quot;;&#10;import { CategoryMenuContent } from &quot;./CategoryMenuContent&quot;;&#10;&#10;/**&#10; * Client-side wrapper for the megamenu&#10; * This component handles all interactive elements (triggers, state, effects)&#10; */&#10;export default function MegaMenuWrapper({ &#10;  categories&#10;}: { &#10;  categories: CategoryItem[];&#10;}) {&#10;    const pathname = usePathname();&#10;    const [isMenuOpen, setIsMenuOpen] = useState(false);&#10;    &#10;    // Handle backdrop effect with a memoized function to improve performance&#10;    const applyBackdropEffect = useCallback((isOpen: boolean) =&gt; {&#10;        const mainElement = document.querySelector('main');&#10;        if (!mainElement) return;&#10;        &#10;        if (isOpen) {&#10;            // Add blur and dimming effects to the main content&#10;            mainElement.classList.add('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;            &#10;            // Apply styles to any background images in the main element&#10;            const style = document.createElement('style');&#10;            style.id = 'megamenu-backdrop-style';&#10;            style.textContent = `&#10;                main::before {&#10;                    content: '';&#10;                    position: absolute;&#10;                    inset: 0;&#10;                    background-color: rgba(0,0,0,0.2);&#10;                    backdrop-filter: blur(8px);&#10;                    z-index: 5;&#10;                    pointer-events: none;&#10;                }&#10;            `;&#10;            document.head.appendChild(style);&#10;        } else {&#10;            mainElement.classList.remove('backdrop-blur-md', 'brightness-50', 'transition-all', 'duration-300');&#10;            const existingStyle = document.getElementById('megamenu-backdrop-style');&#10;            if (existingStyle) {&#10;                existingStyle.remove();&#10;            }&#10;        }&#10;    }, []);&#10;    &#10;    // Effect to manage body scroll and backdrop when menu is open&#10;    useEffect(() =&gt; {&#10;        if (isMenuOpen) {&#10;            document.body.classList.add('overflow-hidden');&#10;            applyBackdropEffect(true);&#10;        } else {&#10;            document.body.classList.remove('overflow-hidden');&#10;            applyBackdropEffect(false);&#10;        }&#10;        &#10;        return () =&gt; {&#10;            document.body.classList.remove('overflow-hidden');&#10;            applyBackdropEffect(false);&#10;        };&#10;    }, [isMenuOpen, applyBackdropEffect]);&#10;&#10;    return (&#10;        &lt;NavigationMenu onValueChange={(value) =&gt; setIsMenuOpen(!!value)}&gt;&#10;            &lt;NavigationMenuList&gt;&#10;                {categories.map((category) =&gt; (&#10;                    &lt;NavigationMenuItem key={category.uid}&gt;&#10;                        &lt;NavigationMenuTrigger&#10;                            className={cn(&#10;                                &quot;text-sm font-medium&quot;,&#10;                                pathname?.includes(`/category/${category.url_key}`)&#10;                                    ? &quot;text-primary&quot;&#10;                                    : &quot;text-gray-700&quot;&#10;                            )}&#10;                        &gt;&#10;                            {category.name}&#10;                        &lt;/NavigationMenuTrigger&gt;&#10;                        &lt;NavigationMenuContent className=&quot;w-[800px] lg:w-[950px] bg-white rounded-xl shadow-xl border border-gray-100 z-30&quot;&gt;&#10;                            &lt;CategoryMenuContent &#10;                                category={category} &#10;                                activePath={pathname} &#10;                            /&gt;&#10;                        &lt;/NavigationMenuContent&gt;&#10;                    &lt;/NavigationMenuItem&gt;&#10;                ))}&#10;            &lt;/NavigationMenuList&gt;&#10;        &lt;/NavigationMenu&gt;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/components/product/SkeletonProduct.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/components/product/SkeletonProduct.tsx" />
              <option name="originalContent" value="import { Skeleton } from &quot;@/components/ui/skeleton&quot;&#10;&#10;export default function SkeletonProduct() {&#10;    return (&#10;        &lt;div className=&quot;animate-pulse flex flex-col&quot;&gt;&#10;            {/* Image placeholder */}&#10;            &lt;Skeleton className=&quot;w-[240px] h-[300px] rounded-lg&quot; /&gt;&#10;&#10;            {/* Product name */}&#10;            &lt;Skeleton className=&quot;mt-2 h-4 w-3/4 rounded&quot; /&gt;&#10;&#10;            {/* Price placeholder */}&#10;            &lt;Skeleton className=&quot;mt-1 h-4 w-1/2 rounded&quot; /&gt;&#10;&#10;            {/* Swatches row */}&#10;            &lt;div className=&quot;mt-3 flex space-x-2&quot;&gt;&#10;                &lt;Skeleton className=&quot;w-6 h-6 rounded-full&quot; /&gt;&#10;                &lt;Skeleton className=&quot;w-6 h-6 rounded-full&quot; /&gt;&#10;                &lt;Skeleton className=&quot;w-6 h-6 rounded-full&quot; /&gt;&#10;            &lt;/div&gt;&#10;&#10;            {/* CTA button */}&#10;            &lt;Skeleton className=&quot;mt-4 h-8 w-full rounded&quot; /&gt;&#10;        &lt;/div&gt;&#10;    );&#10;}&#10;" />
              <option name="updatedContent" value="import { Skeleton } from &quot;@/components/ui/skeleton&quot;&#10;&#10;export default function SkeletonProduct() {&#10;    return (&#10;        &lt;div className=&quot;animate-pulse flex flex-col w-full max-w-xs mx-auto&quot;&gt;&#10;            {/* Image placeholder */}&#10;            &lt;Skeleton className=&quot;aspect-square w-full rounded-xl&quot; /&gt;&#10;&#10;            {/* Product name */}&#10;            &lt;Skeleton className=&quot;mt-4 h-5 w-3/4 rounded&quot; /&gt;&#10;&#10;            {/* Price placeholder */}&#10;            &lt;Skeleton className=&quot;mt-2 h-4 w-1/3 rounded&quot; /&gt;&#10;&#10;            {/* Swatches row */}&#10;            &lt;div className=&quot;mt-3 flex gap-1.5&quot;&gt;&#10;                &lt;Skeleton className=&quot;w-5 h-5 rounded-full&quot; /&gt;&#10;                &lt;Skeleton className=&quot;w-5 h-5 rounded-full&quot; /&gt;&#10;                &lt;Skeleton className=&quot;w-5 h-5 rounded-full&quot; /&gt;&#10;                &lt;Skeleton className=&quot;w-5 h-5 rounded-full&quot; /&gt;&#10;            &lt;/div&gt;&#10;        &lt;/div&gt;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/components/product/SkeletonProductGrid.tsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/components/product/SkeletonProductGrid.tsx" />
              <option name="originalContent" value="import SkeletonProduct from './SkeletonProduct'&#10;&#10;export default function SkeletonProductGrid() {&#10;    return (&#10;        &lt;div className=&quot;&#10;                grid&#10;                grid-cols-1&#10;                sm:grid-cols-2&#10;                md:grid-cols-2&#10;                lg:grid-cols-3&#10;                xl:grid-cols-4&#10;                gap-x-6&#10;                gap-y-10&#10;        &quot;&gt;&#10;            {Array.from({length: 25}).map((_, index) =&gt; (&#10;                &lt;SkeletonProduct key={index}/&gt;&#10;            ))}&#10;        &lt;/div&gt;&#10;    );&#10;}&#10;" />
              <option name="updatedContent" value="import SkeletonProduct from './SkeletonProduct'&#10;&#10;export default function SkeletonProductGrid() {&#10;    return (&#10;        &lt;div className=&quot;&#10;                grid&#10;                grid-cols-2&#10;                sm:grid-cols-2&#10;                md:grid-cols-3&#10;                lg:grid-cols-3&#10;                xl:grid-cols-4&#10;                gap-x-4&#10;                sm:gap-x-6&#10;                md:gap-x-8&#10;                gap-y-10&#10;                sm:gap-y-12&#10;                md:gap-y-16&#10;        &quot;&gt;&#10;            {Array.from({length: 8}).map((_, index) =&gt; (&#10;                &lt;SkeletonProduct key={index}/&gt;&#10;            ))}&#10;        &lt;/div&gt;&#10;    );&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/graphql/queries/categories/get_all_categories.graphql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/graphql/queries/categories/get_all_categories.graphql" />
              <option name="originalContent" value="query GetAllCategories {&#10;    categories {&#10;        items {&#10;            children {&#10;                ...CategoryFields&#10;                children {&#10;                    ...CategoryFields&#10;                    children {&#10;                        ...CategoryFields&#10;                        children {&#10;                            ...CategoryFields&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;fragment CategoryFields on CategoryTree {&#10;    uid&#10;    name&#10;    url_key&#10;    level&#10;    path&#10;}" />
              <option name="updatedContent" value="query GetAllCategories {&#10;    categories {&#10;        items {&#10;            children {&#10;                ...CategoryFields&#10;                children {&#10;                    ...CategoryFields&#10;                    children {&#10;                        ...CategoryFields&#10;                        children {&#10;                            ...CategoryFields&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;fragment CategoryFields on CategoryTree {&#10;    uid&#10;    name&#10;    url_key&#10;    level&#10;    path&#10;    description&#10;    image&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/services/categories.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/services/categories.ts" />
              <option name="originalContent" value="import GET_CATEGORIES_QUERY from &quot;@/graphql/queries/categories/get_all_categories.graphql&quot;;&#10;import { GraphQLResponse } from &quot;@/types/apollo&quot;&#10;import { type CategoryItem } from &quot;@/types/category&quot;;&#10;import {print} from &quot;graphql&quot;;&#10;&#10;type CategoriesResponse = {&#10;    categories?: {&#10;        items?: Array&lt;{&#10;            children?: CategoryItem[];&#10;        }&gt;;&#10;    };&#10;};&#10;&#10;// Helper function to transform GraphQL category data to our CategoryItem format&#10;const mapCategoryData = (category: CategoryItem): CategoryItem =&gt; {&#10;    return {&#10;        name: category.name,&#10;        uid: category.uid,&#10;        url_key: category.url_key,&#10;        path: category.path || '',&#10;        level: category.level || 0,&#10;        children: category.children ? category.children.map(mapCategoryData) : []&#10;    };&#10;};&#10;&#10;const getAllCategories = async (): Promise&lt;CategoryItem[]&gt; =&gt; {&#10;    const queryString = print(GET_CATEGORIES_QUERY);&#10;&#10;    try {&#10;        const res = await fetch(process.env.MAGENTO_GRAPHQL_ENDPOINT as string, {&#10;            method: &quot;POST&quot;,&#10;            headers: {&#10;                &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;            },&#10;            body: JSON.stringify({ query: queryString }),&#10;        });&#10;&#10;        if (!res.ok) {&#10;            console.error(&quot;Error fetching categories:&quot;, res.statusText);&#10;            return [];&#10;        }&#10;&#10;        const { data, errors }: GraphQLResponse&lt;CategoriesResponse&gt; = await res.json();&#10;&#10;        if (errors) {&#10;            console.error(&quot;GraphQL errors:&quot;, errors);&#10;            return [];&#10;        }&#10;&#10;        const items = data?.categories?.items ?? [];&#10;        return items.flatMap((item) =&gt;&#10;            (item.children ?? []).map(mapCategoryData)&#10;        );&#10;    }&#10;    catch (error) {&#10;        console.error(&quot;Error fetching categories:&quot;, error);&#10;        return [];&#10;    }&#10;};&#10;&#10;export { getAllCategories };" />
              <option name="updatedContent" value="import GET_CATEGORIES_QUERY from &quot;@/graphql/queries/categories/get_all_categories.graphql&quot;;&#10;import { GraphQLResponse } from &quot;@/types/apollo&quot;&#10;import { type CategoryItem } from &quot;@/types/category&quot;;&#10;import {print} from &quot;graphql&quot;;&#10;&#10;type CategoriesResponse = {&#10;    categories?: {&#10;        items?: Array&lt;{&#10;            children?: CategoryItem[];&#10;        }&gt;;&#10;    };&#10;};&#10;&#10;// Helper function to transform GraphQL category data to our CategoryItem format&#10;const mapCategoryData = (category: CategoryItem): CategoryItem =&gt; {&#10;    return {&#10;        name: category.name,&#10;        uid: category.uid,&#10;        url_key: category.url_key,&#10;        path: category.path || '',&#10;        level: category.level || 0,&#10;        description: category.description || '',&#10;        image: category.image || '',&#10;        children: category.children ? category.children.map(mapCategoryData) : []&#10;    };&#10;};&#10;&#10;const getAllCategories = async (): Promise&lt;CategoryItem[]&gt; =&gt; {&#10;    const queryString = print(GET_CATEGORIES_QUERY);&#10;&#10;    try {&#10;        const res = await fetch(process.env.MAGENTO_GRAPHQL_ENDPOINT as string, {&#10;            method: &quot;POST&quot;,&#10;            headers: {&#10;                &quot;Content-Type&quot;: &quot;application/json&quot;,&#10;            },&#10;            body: JSON.stringify({ query: queryString }),&#10;        });&#10;&#10;        if (!res.ok) {&#10;            console.error(&quot;Error fetching categories:&quot;, res.statusText);&#10;            return [];&#10;        }&#10;&#10;        const { data, errors }: GraphQLResponse&lt;CategoriesResponse&gt; = await res.json();&#10;&#10;        if (errors) {&#10;            console.error(&quot;GraphQL errors:&quot;, errors);&#10;            return [];&#10;        }&#10;&#10;        const items = data?.categories?.items ?? [];&#10;        return items.flatMap((item) =&gt;&#10;            (item.children ?? []).map(mapCategoryData)&#10;        );&#10;    }&#10;    catch (error) {&#10;        console.error(&quot;Error fetching categories:&quot;, error);&#10;        return [];&#10;    }&#10;};&#10;&#10;export { getAllCategories };" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/types/category.ts">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/types/category.ts" />
              <option name="originalContent" value="export interface CategoryItem  {&#10;    uid: string;&#10;    name: string;&#10;    url_key: string;&#10;    level: number;&#10;    path: string;&#10;    children?: CategoryItem[];&#10;};" />
              <option name="updatedContent" value="export interface CategoryItem  {&#10;    uid: string;&#10;    name: string;&#10;    url_key: string;&#10;    level: number;&#10;    path: string;&#10;    description?: string;&#10;    image?: string;&#10;    children?: CategoryItem[];&#10;};" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>